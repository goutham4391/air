function _defineProperty(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}var DEBUG=0,planeCount=0,disclaimers={G800:{normal:"5",long:"1"},G700:{normal:"5",long:"1"},G650ER:{normal:"5",long:"1"},G650:{normal:"5",long:"1"},G600:{normal:"5",long:"1"},G500:{normal:"6",long:"2"},G400:{normal:"7",long:"3"},G280:{normal:"8",long:"4"}};function debug(a){DEBUG&&console.log(a)}var lang=$("html").attr("lang");"zh-Hans"==lang&&(lang="cn");var specTrans=window._DATA.rangemap.specs;function getZoomLevel(){var a=$(window).width();if(a>=hg)return 2.5;return a>=sm?2:parseInt(1)}function resetZoom(){var a=$(window).width();if("undefined"!=typeof rs){var b=rs.map.zoom;a>=hg&&2.5!=b?rs.map.setZoom(2.5):a>=sm&&2!=b?rs.map.setZoom(2):a<sm&&1!=b&&rs.map.setZoom(1)}}function Airport(a,b){a=a?a:{},this.name=a.name,this.code=a.code,this.lat=a.lat,this.lon=a.lon,this.rs=b,this.infoWindow=new google.maps.InfoWindow,this.infoWindow.setContent("<span style=\"font-family: 'Horizon Light', helvetica, arial, sans-serif;\">"+this.name[lang]+"</span>")}Airport.prototype={point:function point(){return this._point||(this._point=new google.maps.LatLng(this.lat,this.lon)),this._point},marker:function marker(){return this._marker||(this._marker=new google.maps.Marker({position:this.point(),clickable:!0,icon:this.inactive_icon()// tooltip: this.name
}),this._marker.name=this.code,google.maps.event.addListener(this._marker,"click",function(){rs.click_airport(this.code),$(".city_select option[value="+this.code+"]").attr("selected","selected"),this.infoWindow.open(map,this._marker),window.airport_default_selected?gtag("event","select_content",{content_type:"rangemap_city",item_id:this.name.en}):window.airport_default_selected=!0}.bind(this)),google.maps.event.addListener(this._marker,"mouseover",function(){this.rs.active_code!=this.code&&this.infoWindow.open(map,this._marker)}.bind(this)),google.maps.event.addListener(this._marker,"mouseout",function(){this.rs.active_code!=this.code&&this.infoWindow.close()}.bind(this))),this._marker},addToMap:function addToMap(a){this.marker().setMap(a)},marker_click:function marker_click(){//
},show_plane:function show_plane(a,b){// if the route isn't already setup, do that now
if(!this.routes[b][a]){for(var c=this.rs.planes[a],d=[],e=c.airport_data[this.code][b],f=0;f<e.length;f++)d[f]=new google.maps.LatLng(e[f][0],e[f][1]);var g=new google.maps.Polyline({path:d,strokeColor:this.color,strokeOpacity:.8,strokeWeight:1//fillColor: '#FF0000',
//fillOpacity: 0.35
});this.routes[b][a]=g}this.routes[b][a].setMap(this.rs.map)},set_active_icon:function set_active_icon(){this._marker&&this._marker.setIcon(this.active_icon())},set_inactive_icon:function set_inactive_icon(){this._marker&&this._marker.setIcon(this.inactive_icon())},active_icon:function active_icon(){return{url:"/rangemap/assets/images/map-marker-blue.png",scaledSize:new google.maps.Size(35,40)}},inactive_icon:function inactive_icon(){return{url:"/rangemap/assets/images/map-marker-blue.png",scaledSize:new google.maps.Size(18,20)}},_create_icon:function _create_icon(a){return new google.maps.MarkerImage("http://chart.apis.google.com/chart?chst=d_map_pin_letter&chld=|"+a,new google.maps.Point(0,0),new google.maps.Point(0,0))}};function Plane(a){a=a?a:{},this.name=a.name,this.active=!1,this.airport_data=a.airports,this.airports={},this.routes={long:{},normal:{}},this.distance=a.distance,this.color=a.color?a.color:"#FF0000"}Plane.prototype={addToMap:function addToMap(a){var b=$("<div class=\"plane_row\"></div>"),c="<sup>"+disclaimers[this.name].normal+"</sup>",d="<sup>"+disclaimers[this.name].long+"</sup>",e="";e+="<div class=\"plane_list\" data-name=\""+this.name+"\">",e+="   <div class=\"plane_button\" aria-hidden=\"true\"></div>",e+="   <input class=\"aircraft_checkbox\" type=\"checkbox\" id=\"radio_"+this.name+"\">",e+="   <div class=\"plane_name\">",e+="       <label class=\"aircraft_model\" for=\"radio_"+this.name+"\">"+this.name+"</label>",e+="   </div>",e+="   <div data-section=\"plane stats\">",e+="       <label class=\"distance_label\" for=\"radio_"+this.name+"\">",e+="           <div data-name=\""+this.name+"\" class=\"normal cruise_indicator\">",e+=specTrans[this.name]?specTrans[this.name][lang].normal.replace(/,\s/,c+"<br/>"):this.distance.normal.replace(/Mach/,c+"<br/>Mach"),e+="           </div>",e+="           <div data-name=\""+this.name+"\" class=\"long cruise_indicator\">",e+=specTrans[this.name]?specTrans[this.name][lang].long.replace(/,\s/,d+"<br/>"):this.distance.long.replace(/Mach/,d+"<br/>Mach"),e+="           </div>",e+="       </label>",e+="   </div>",e+="</div>",planeCount=planeCount<_PLANES.length?planeCount+1:1,1===planeCount&&a.append(b),a.find(".plane_row").last().append(e),$("#map_key").append("<div data-name=\""+this.name+"\" class=\"key_item_wrapper hidden\"><div class=\"label_color\" style=\"background-color: "+this.color+";\"></div><div class=\"label_text\">"+this.name+"</div></div>")},show_route:function show_route(a,b,c){// if the route isn't already setup, do that now
if(debug("show_route("+a+", "+b+", "+c+")"),!this.routes[b][a]){debug("setting up route "+a+", "+b);var d=[];if(this.airport_data[a]){var e=this.airport_data[a][b],f=!1;"flip"==e[0]&&(e.shift(),f=!0);for(var g=0;g<e.length;g++)d.push(new google.maps.LatLng(e[g][0],e[g][1]));d.push(d[0]);var h=[new google.maps.LatLng(-90,-180,!0),new google.maps.LatLng(-90,-60,!0),new google.maps.LatLng(-90,60,!0),new google.maps.LatLng(-90,180,!0),new google.maps.LatLng(90,180,!0),new google.maps.LatLng(90,60,!0),new google.maps.LatLng(90,-60,!0),new google.maps.LatLng(90,-180,!0)];this.routes[b][a]=[// one for filling unreachable area of world
new google.maps.Polygon(_defineProperty({paths:[h,d],strokeColor:this.color,strokeOpacity:0,strokeWeight:2,geodesic:!0,fillColor:"#000000",fillOpacity:.1},"geodesic",!0)),// one for showing the stroke of the line separating dark from light
// if we don't split them up, it draws the strokes over the meridian
new google.maps.Polygon(_defineProperty({paths:[d],strokeColor:this.color,strokeOpacity:.8,strokeWeight:2,geodesic:!0,fillColor:this.color,fillOpacity:0},"geodesic",!0))],f&&(this.routes[b][a][0]=new google.maps.Polygon(_defineProperty({paths:[d],strokeColor:this.color,strokeOpacity:0,strokeWeight:2,geodesic:!0,fillColor:"#000000",fillOpacity:.2},"geodesic",!0)))}else debug("****** No airport data for "+this.name+": "+a+", "+b)}this.routes[b]&&this.routes[b][a]&&(this.routes[b][a][0].setMap(c),this.routes[b][a][1].setMap(c))},hide_route:function hide_route(a,b){this.routes[b][a]&&(this.routes[b][a][0].setMap(null),this.routes[b][a][1].setMap(null))}};function RangeMapManager(a){a=a?a:{},this.map=a.map,this.plane_list=a.plane_list,this.active_code=null,this.active_cruise=$(".speed_select option:selected").data("name"),a.airports&&this.setup_airports(a.airports),a.planes&&(this.planes={},this.setup_planes(a.planes))}RangeMapManager.prototype={setup_airports:function setup_airports(a){this.airports={};for(var b=0;b<a.length;b++){var c=a[b],d=new Airport(c,this);this.map&&d.addToMap(this.map),this.airports[c.code]=d}},setup_planes:function setup_planes(a){for(var b,c=0;c<a.length;c++)b=new Plane(a[c]),this.plane_list&&b.addToMap(this.plane_list),this.planes[b.name]=b},click_plane:function click_plane(a){var b,a=$(a);a.hasClass("plane_list")||(a=a.parent(".plane_list"));var c=a.data("name");return!!c&&void(a.hasClass("selected")?(b="deselected",a.removeClass("selected"),a.addClass("current"),a.find(".plane_button").css({background:"transparent"}),this.hide_plane_route(c),$("#radio_"+c).prop("checked",!1)):(b="selected",a.addClass("selected"),a.addClass("current"),a.find(".plane_button").css({background:rs.planes[c].color}),this.show_plane_route(c),$("#radio_"+c).prop("checked",!0)),gtag("event","select_content",{element:c,list:"rangemap aircraft selector",action:b}))},click_airport:function click_airport(a){null===this.active_code&&$("#select_airport").fadeOut("fast"),this.active_code!=a&&(this.set_inactive_icon(),this.turn_off_all(),this.active_code=a,this.set_active_icon(),this.turn_on_all())},click_cruise:function click_cruise(a){var b=$(a),c=$(b).data("name");c!=this.active_cruise&&(this.turn_off_all(),this.active_cruise=c,$(".cruise_indicator").hide(),$(".cruise_indicator."+c).show(),b.addClass("selected"),this.turn_on_all())},set_active_icon:function set_active_icon(){this.active_code&&(this.airports[this.active_code].set_active_icon(),this.airports[this.active_code].infoWindow.open(map,this._marker))},set_inactive_icon:function set_inactive_icon(){this.active_code&&(this.airports[this.active_code].set_inactive_icon(),this.airports[this.active_code].infoWindow.close())},show_plane_route:function show_plane_route(a){debug("show_plane_route: "+a),this.active_code&&(this.planes[a].show_route(this.active_code,this.active_cruise,this.map),$(".key_item_wrapper[data-name='"+a+"']").removeClass("hidden"))},hide_plane_route:function hide_plane_route(a){debug("hide_plane_route: "+a),this.active_code&&(this.planes[a].hide_route(this.active_code,this.active_cruise),$(".key_item_wrapper[data-name='"+a+"']").addClass("hidden"))},turn_off_all:function turn_off_all(){$(".plane_list.selected").each(function(a,b){rs.hide_plane_route($(b).data("name"))})},turn_on_all:function turn_on_all(){$(".plane_list.selected").each(function(a,b){rs.show_plane_route($(b).data("name"))})}};// ------------------------------------
// Build map experience
// ------------------------------------
var map;function initialize(){var a=new google.maps.StyledMapType([{elementType:"labels",stylers:[{visibility:"off"}]},{elementType:"geometry.stroke",stylers:[{visibility:"on"}]},{featureType:"landscape",elementType:"geometry.fill",stylers:[{visibility:"on"},{color:"#cccccc"}]},{stylers:[{saturation:-100}]},{featureType:"water",elementType:"geometry.fill",stylers:[{color:"#eeeeee"}]}],{name:"Styled Map"}),b=$(window).width(),c={backgroundColor:"#f9f9f9",center:new google.maps.LatLng(22.167,6.503),zoom:getZoomLevel(),disableDefaultUI:!0,panControl:!0,zoomControl:!0,scrollwheel:!1,mapTypeControl:!1,scaleControl:!0,streetViewControl:!1,overviewMapControl:!1,mapTypeControlOptions:{mapTypeIds:[google.maps.MapTypeId.ROADMAP,"map_style"]}};map=new google.maps.Map(document.getElementById("map_canvas"),c),map.mapTypes.set("map_style",a),map.setMapTypeId("map_style"),rs=new RangeMapManager({map:map,airports:_AIRPORTS,planes:_PLANES,plane_list:$("#plane_list")}),$(".cruise_indicator").hide(),$(".cruise_indicator."+rs.active_cruise).show(),$(".plane_list").click(function(a){// e.preventDefault();
rs.click_plane(a.target)}),$("#range_map_controls .city_select").on("change",function(){new google.maps.event.trigger(rs.airports[$(this).val()]._marker,"click")}),$("#range_map_controls .speed_select").on("change",function(){rs.click_cruise($(this).find("option:selected"))}),$("#range_map_controls .speed_select, #range_map_controls .city_select").trigger("change"),$("#aircraft_list .plane_row:first-child .plane_list:first-child").trigger("click");var d=new URLSearchParams(location.search).get("selected");d&&d.split(",").forEach(function(a){"undefined"!=typeof $("#radio_".concat(a))&&(toggleAircraftMenu(),$("#aircraft_selection_arrow").addClass("aircraft_selection__arrow--open"),rs.click_plane($("#radio_".concat(a))))})}google.maps.event.addDomListener(window,"load",initialize),$(window).on("resize",function(){resetZoom()});function toggleAircraftMenu(a){$("#aircraft_selection_arrow").hasClass("aircraft_selection__arrow--open")?($("#aircraft_selection_arrow").removeClass("aircraft_selection__arrow--open"),$("#menu").removeClass("aircraft_options--open"),a?$(".plane_list.current").each(function(){$(this).trigger("click")}):$(".plane_list.current").each(function(){$(this).removeClass("current")})):($("#aircraft_selection_arrow").addClass("aircraft_selection__arrow--open"),window.setTimeout(function(){$("#menu").addClass("aircraft_options--open")},200))}function toggleCruiseType(a){$("#range_map_controls .fleetspecs__button, .fleetspecs__buttons.mobile .fleetspecs__button").each(function(){$(this).removeClass("fleetspecs__button--active")}),$("#range_map_controls .fleetspecs__"+a).addClass("fleetspecs__button--active"),$(".fleetspecs__buttons.mobile .fleetspecs__"+a).addClass("fleetspecs__button--active"),$("#cruise_speed option:selected").removeAttr("selected"),"normal"===a?$("#cruise_speed option[id='y']").attr("selected","selected"):"long"==a&&$("#cruise_speed option[id='z']").attr("selected","selected"),$("#cruise_speed").trigger("change")}